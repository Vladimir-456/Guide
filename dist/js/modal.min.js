import{initValidateCallback as e}from"./validate.js";const t=document.querySelector(".modal__close"),o=document.querySelector(".modal__overlay"),n=document.querySelectorAll(".button__slider"),r=document.querySelector(".modal__form");function a(){o.style.display="block",t.addEventListener("click",c)}function c(){o.style.display="none",r.reset(),t.removeEventListener("click",c)}const l=async t=>{t.preventDefault();const o=e();if(await o.revalidate())try{(e=>{const t={};e.forEach(((e,o)=>{t[o]="agreement"===o||"newsletter"===o?"on"===e||"true"===e:e}))})(new FormData(t.target));c(),r.reset(),window.location.href="/manage",alert("Спасибо! Ваша заявка принята.")}catch(e){alert("Произошла ошибка при отправке формы. Пожалуйста, попробуйте позже.")}};export const initModal=()=>{n.forEach((e=>{e.addEventListener("click",a)})),r.addEventListener("submit",l)};