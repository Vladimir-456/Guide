import{initValidate as e}from"./validate.js";const t=document.querySelector(".profile-modal"),o=document.querySelector(".profile-modal__close"),r=document.querySelector("#profile-modal__form"),n=document.querySelector(".button--anketa"),a=()=>{t.style.display="block",o.addEventListener("click",c)},i=async t=>{t.preventDefault();const o=e();if(!o)return;if(!await o.revalidate())return;const n=new FormData(t.target),a=Object.fromEntries(n);try{const e=await fetch("/api/application",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Network response was not ok");return c(),r.reset(),e.json()}catch(e){}},c=()=>{t.style.display="none",r.reset(),o.removeEventListener("click",c)};export const initProfileModal=()=>{n.addEventListener("click",a),r.addEventListener("submit",i)};