export default function lazyLoad(){const e=document.querySelectorAll("img[data-src]"),s=new IntersectionObserver(((e,s)=>{e.forEach((e=>{if(e.isIntersecting&&e.intersectionRatio>=.5){const r=e.target;r.classList.add("loading");const a=new Image;a.src=r.dataset.src,a.onload=()=>{r.src=r.dataset.src,r.removeAttribute("data-src"),r.classList.remove("lazy","loading"),r.classList.add("loaded"),s.unobserve(r)},a.onerror=()=>{console.error(`Ошибка загрузки изображения: ${r.dataset.src}`),r.classList.remove("loading"),r.classList.add("error")}}}))}),{root:null,rootMargin:"50px",threshold:.5});e.forEach((e=>{e.classList.add("lazy-placeholder"),s.observe(e)}))}